const regex=/\b(?=(YYYY|YY|MMMM|MMM|MM|M|DDDD|DDD|DD|D|HH|hh|h|mm|m|ss|s|ii|ampm|AMPM|n_YY|n_M|n_D|n_h|n_HH|n_m|n_s|n_ii]))\1\b/g,nStr={1:'st',2:'nd',3:'rd',11:'th',12:'th',13:'th'},single=t=>0===t[0]?t.substring(1)-12:t,h12=t=>t>12?t-12:t,nth=t=>t+=nStr[t.toString().slice(-2)]||nStr[t.toString().slice(-1)]||'th',placeholders={YYYY:(t,e)=>t.toLocaleString(e,{year:'numeric'}),YY:(t,e)=>t.toLocaleString(e,{year:'2-digit'}),MMMM:(t,e)=>t.toLocaleString(e,{month:'long'}),MMM:(t,e)=>t.toLocaleString(e,{month:'short'}),MM:(t,e)=>t.toLocaleString(e,{month:'2-digit'}),M:(t,e)=>t.toLocaleString(e,{month:'numeric'}),DDDD:(t,e)=>t.toLocaleString(e,{weekday:'long'}),DDD:(t,e)=>t.toLocaleString(e,{weekday:'short'}),DD:t=>('0'+t.getDate()).slice(-2),D:t=>single(t.getDate()),HH:t=>t.getHours(),hh:t=>('0'+h12(t.getHours())).slice(-2),h:t=>single(h12(t.getHours())),mm:t=>('0'+t.getMinutes()).slice(-2),m:t=>single(t.getMinutes()),ss:t=>('0'+t.getSeconds()).slice(-2),s:t=>single(t.getSeconds()),ii:t=>t.getMilliseconds(),ampm:t=>t.getHours()>=12?'PM':'AM',AMPM:t=>t.getHours()>=12?'PM':'AM',n_YY:t=>nth(parseInt(placeholders.YY(t))+1),n_M:t=>nth(parseInt(placeholders.M(t))),n_D:t=>nth(parseInt(placeholders.D(t))),n_HH:t=>nth(parseInt(placeholders.HH(t))),n_h:t=>nth(parseInt(placeholders.h(t))),n_m:t=>nth(parseInt(placeholders.m(t))),n_s:t=>nth(parseInt(placeholders.s(t)))};let dtstamp=(t,e,n)=>('string'!=typeof t&&(n=e,e=t,t='HH:mm:ss'),t.replace(regex,t=>placeholders[t](e&&'object'==typeof e?e:new Date,n||'en-GB')));const preset=(t,e,n,s)=>{'object'==typeof n&&'object'!=typeof e||(s=n,n=e),['full','long','medium','short'].includes(e)||(s=e,e='date'==t?'short':'medium');let o={};return o[t+'Style']=e,(n&&'object'==typeof n?n:new Date).toLocaleString(s||'en-GB',o);};dtstamp.date=((t,e,n)=>preset('date',t,e,n)),dtstamp.time=((t,e,n)=>preset('time',t,e,n)),dtstamp.ampm=(t=>(t||new Date).getHours()>=12?'PM':'AM'),dtstamp.AMPM=dtstamp.ampm,dtstamp.nth=nth,'undefined'!=typeof exports&&(module.exports=dtstamp);